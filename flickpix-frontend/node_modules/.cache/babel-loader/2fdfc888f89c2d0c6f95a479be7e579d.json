{"ast":null,"code":"var _jsxFileName = \"/home/lei/Dev/FlickPix/flickpix-frontend/src/App.js\";\nimport React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Home from './components/Home';\nimport FormContainer from './components/FormContainer';\nimport { withRouter } from 'react-router-dom';\nlet api = `http://localhost:4000/api`;\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      movies: [],\n      user: {\n        id: 0,\n        username: \"\",\n        user_queues: []\n      },\n      token: \"\"\n    };\n\n    this.handleResponse = response => {\n      if (response.user) {\n        localStorage.token = response.token;\n        this.setState({\n          user: response.user,\n          token: response.token\n        }, () => {\n          this.props.history.push(\"/\");\n        });\n      } else {\n        alert(response.error);\n      }\n    };\n\n    this.handleLoginSubmit = userInfo => {\n      fetch(\"http://localhost:4000/login\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(userInfo)\n      }).then(r => r.json()).then(this.handleResponse);\n    };\n\n    this.handleRegisterSubmit = userInfo => {\n      fetch(\"http://localhost:4000/users\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username: userInfo.username,\n          password: userInfo.password\n        })\n      }).then(r => r.json()).then(this.handleResponse);\n    };\n\n    this.renderForm = routerProps => {\n      if (routerProps.location.pathname === \"/login\") {\n        return /*#__PURE__*/React.createElement(FormContainer, {\n          formName: \"Login Form\",\n          handleSubmit: this.handleLoginSubmit,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 14\n          }\n        });\n      } else if (routerProps.location.pathname === \"/register\") {\n        return /*#__PURE__*/React.createElement(FormContainer, {\n          formName: \"Register Form\",\n          handleSubmit: this.handleRegisterSubmit,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 14\n          }\n        });\n      }\n    };\n\n    this.addMovieToQueue = movieObj => {\n      console.log(movieObj);\n      fetch(\"http://localhost:4000/user_queues\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          \"accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          movie_id: movieObj.movie_id,\n          user_id: this.state.user.id\n        })\n      }).then(r => r.json()).then(newMovieForQueue => {\n        this.setState({\n          user: { ...this.state.user,\n            user_queues: [...this.state.user.user_queues, newMovieForQueue]\n          }\n        });\n      });\n    };\n\n    this.updateQueue = () => {\n      console.log(\"hi\");\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch(\"http://localhost:4000/persist\", {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      }).then(r => r.json()).then(this.handleResponse);\n    }\n\n    fetch(\"http://localhost:4000/api\").then(r => r.json()).then(data => this.setState({\n      movies: data.results\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      render: this.renderForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/register\",\n      render: this.renderForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      render: () => /*#__PURE__*/React.createElement(Home, {\n        userName: this.state.user.username,\n        movies: this.state.movies,\n        addMovieToQueue: this.addMovieToQueue,\n        updateQueue: this.updateQueue,\n        userObj: this.state.user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      render: () => /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 33\n        }\n      }, \"Page not Found\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/home/lei/Dev/FlickPix/flickpix-frontend/src/App.js"],"names":["React","Switch","Route","Home","FormContainer","withRouter","api","App","Component","state","movies","user","id","username","user_queues","token","handleResponse","response","localStorage","setState","props","history","push","alert","error","handleLoginSubmit","userInfo","fetch","method","headers","body","JSON","stringify","then","r","json","handleRegisterSubmit","password","renderForm","routerProps","location","pathname","addMovieToQueue","movieObj","console","log","movie_id","user_id","newMovieForQueue","updateQueue","componentDidMount","data","results","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,MAAR,EAAgBC,KAAhB,QAA4B,kBAA5B;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AAEA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,IAAIC,GAAG,GAAI,2BAAX;;AAEA,MAAMC,GAAN,SAAkBP,KAAK,CAACQ,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCC,KADgC,GACxB;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,IAAI,EAAE;AACJC,QAAAA,EAAE,EAAE,CADA;AAEJC,QAAAA,QAAQ,EAAE,EAFN;AAGJC,QAAAA,WAAW,EAAE;AAHT,OAFA;AAONC,MAAAA,KAAK,EAAE;AAPD,KADwB;;AAAA,SA6BhCC,cA7BgC,GA6BdC,QAAD,IAAc;AAC7B,UAAIA,QAAQ,CAACN,IAAb,EAAmB;AACjBO,QAAAA,YAAY,CAACH,KAAb,GAAqBE,QAAQ,CAACF,KAA9B;AACA,aAAKI,QAAL,CAAc;AACZR,UAAAA,IAAI,EAAEM,QAAQ,CAACN,IADH;AAEZI,UAAAA,KAAK,EAAEE,QAAQ,CAACF;AAFJ,SAAd,EAGG,MAAM;AACP,eAAKK,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH,SALC;AAMD,OARD,MAQO;AACLC,QAAAA,KAAK,CAACN,QAAQ,CAACO,KAAV,CAAL;AACD;AACF,KAzC+B;;AAAA,SA2ChCC,iBA3CgC,GA2CXC,QAAD,IAAc;AAEhCC,MAAAA,KAAK,CAAC,6BAAD,EAAgC;AACnCC,QAAAA,MAAM,EAAE,MAD2B;AAEnCC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAF0B;AAKnCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,QAAf;AAL6B,OAAhC,CAAL,CAOCO,IAPD,CAOMC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAPX,EAQCF,IARD,CAQM,KAAKjB,cARX;AASD,KAtD+B;;AAAA,SAwDhCoB,oBAxDgC,GAwDRV,QAAD,IAAc;AACnCC,MAAAA,KAAK,CAAC,6BAAD,EAAgC;AACnCC,QAAAA,MAAM,EAAE,MAD2B;AAEnCC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAF0B;AAKnCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBnB,UAAAA,QAAQ,EAAEa,QAAQ,CAACb,QADA;AAEnBwB,UAAAA,QAAQ,EAAEX,QAAQ,CAACW;AAFA,SAAf;AAL6B,OAAhC,CAAL,CAUCJ,IAVD,CAUMC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAVX,EAWCF,IAXD,CAWM,KAAKjB,cAXX;AAYD,KArE+B;;AAAA,SAuEhCsB,UAvEgC,GAuElBC,WAAD,IAAiB;AAC5B,UAAGA,WAAW,CAACC,QAAZ,CAAqBC,QAArB,KAAkC,QAArC,EAA8C;AAC5C,4BAAO,oBAAC,aAAD;AAAe,UAAA,QAAQ,EAAC,YAAxB;AAAqC,UAAA,YAAY,EAAE,KAAKhB,iBAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFD,MAEO,IAAIc,WAAW,CAACC,QAAZ,CAAqBC,QAArB,KAAkC,WAAtC,EAAmD;AACxD,4BAAO,oBAAC,aAAD;AAAe,UAAA,QAAQ,EAAC,eAAxB;AAAwC,UAAA,YAAY,EAAE,KAAKL,oBAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACF,KA7E+B;;AAAA,SA+EhCM,eA/EgC,GA+EbC,QAAD,IAAc;AAC9BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAhB,MAAAA,KAAK,CAAC,mCAAD,EAAsC;AACzCC,QAAAA,MAAM,EAAE,MADiC;AAEzCC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,oBAAU;AAFH,SAFgC;AAMzCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBc,UAAAA,QAAQ,EAAEH,QAAQ,CAACG,QADA;AAEnBC,UAAAA,OAAO,EAAE,KAAKtC,KAAL,CAAWE,IAAX,CAAgBC;AAFN,SAAf;AANmC,OAAtC,CAAL,CAWCqB,IAXD,CAWMC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAXX,EAYCF,IAZD,CAYMe,gBAAgB,IAAI;AACxB,aAAK7B,QAAL,CAAc;AACdR,UAAAA,IAAI,EAAE,EACJ,GAAG,KAAKF,KAAL,CAAWE,IADV;AAEJG,YAAAA,WAAW,EAAE,CAAC,GAAG,KAAKL,KAAL,CAAWE,IAAX,CAAgBG,WAApB,EAAiCkC,gBAAjC;AAFT;AADQ,SAAd;AAMD,OAnBD;AAoBD,KArG+B;;AAAA,SAuGhCC,WAvGgC,GAuGlB,MAAM;AAClBL,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACD,KAzG+B;AAAA;;AAWhCK,EAAAA,iBAAiB,GAAG;AAClB,QAAIhC,YAAY,CAACH,KAAjB,EAAwB;AACtBY,MAAAA,KAAK,CAAC,+BAAD,EAAkC;AACrCE,QAAAA,OAAO,EAAE;AACP,2BAAkB,UAASX,YAAY,CAACH,KAAM;AADvC;AAD4B,OAAlC,CAAL,CAKCkB,IALD,CAKMC,CAAC,IAAIA,CAAC,CAACC,IAAF,EALX,EAMCF,IAND,CAMM,KAAKjB,cANX;AAOD;;AAEDW,IAAAA,KAAK,CAAC,2BAAD,CAAL,CACCM,IADD,CACMC,CAAC,IAAIA,CAAC,CAACC,IAAF,EADX,EAECF,IAFD,CAEMkB,IAAI,IAAI,KAAKhC,QAAL,CAAc;AAC1BT,MAAAA,MAAM,EAAEyC,IAAI,CAACC;AADa,KAAd,CAFd;AAKD;;AAgFDC,EAAAA,MAAM,GAAG;AACP,wBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,MAAM,EAAG,KAAKf,UAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,WAAZ;AAAwB,MAAA,MAAM,EAAG,KAAKA,UAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,eAGI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,GAAZ;AAAgB,MAAA,KAAK,MAArB;AAAsB,MAAA,MAAM,EAAE,mBAC1B,oBAAC,IAAD;AACE,QAAA,QAAQ,EAAG,KAAK7B,KAAL,CAAWE,IAAX,CAAgBE,QAD7B;AAEE,QAAA,MAAM,EAAG,KAAKJ,KAAL,CAAWC,MAFtB;AAGE,QAAA,eAAe,EAAG,KAAKgC,eAHzB;AAIE,QAAA,WAAW,EAAG,KAAKO,WAJrB;AAKE,QAAA,OAAO,EAAG,KAAKxC,KAAL,CAAWE,IALvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,eAYI,oBAAC,KAAD;AAAO,MAAA,MAAM,EAAG,mBAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZJ,CADF;AAgBD;;AA5H+B;;AA+HlC,eAAeN,UAAU,CAACE,GAAD,CAAzB","sourcesContent":["import React from 'react';\nimport {Switch, Route} from 'react-router-dom';\nimport Home from './components/Home';\nimport FormContainer from './components/FormContainer';\n\nimport { withRouter } from 'react-router-dom'\n\nlet api = `http://localhost:4000/api`;\n\nclass App extends React.Component {\n  state = {\n    movies: [],\n    user: {\n      id: 0,\n      username: \"\",\n      user_queues: []\n    },\n    token: \"\"\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch(\"http://localhost:4000/persist\", {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      })\n      .then(r => r.json())\n      .then(this.handleResponse)\n    }\n\n    fetch(\"http://localhost:4000/api\")\n    .then(r => r.json())\n    .then(data => this.setState({\n      movies: data.results\n    }))\n  }\n\n  handleResponse = (response) => {\n    if (response.user) {\n      localStorage.token = response.token\n      this.setState({\n        user: response.user,\n        token: response.token\n      }, () => {\n        this.props.history.push(\"/\")\n    })\n    } else {\n      alert(response.error)\n    }\n  }\n\n  handleLoginSubmit = (userInfo) => {\n\n    fetch(\"http://localhost:4000/login\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    })\n    .then(r => r.json())\n    .then(this.handleResponse)\n  }\n\n  handleRegisterSubmit = (userInfo) => {\n    fetch(\"http://localhost:4000/users\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: userInfo.username,\n        password: userInfo.password\n      })\n    })\n    .then(r => r.json())\n    .then(this.handleResponse)\n  }\n\n  renderForm = (routerProps) => {\n    if(routerProps.location.pathname === \"/login\"){\n      return <FormContainer formName=\"Login Form\" handleSubmit={this.handleLoginSubmit}/>\n    } else if (routerProps.location.pathname === \"/register\") {\n      return <FormContainer formName=\"Register Form\" handleSubmit={this.handleRegisterSubmit}/>\n    }\n  }\n\n  addMovieToQueue = (movieObj) => {\n    console.log(movieObj);\n    fetch(\"http://localhost:4000/user_queues\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        \"accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        movie_id: movieObj.movie_id,\n        user_id: this.state.user.id\n      })\n    })\n    .then(r => r.json())\n    .then(newMovieForQueue => {\n      this.setState({\n      user: {\n        ...this.state.user,\n        user_queues: [...this.state.user.user_queues, newMovieForQueue]\n      }\n    })\n    })\n  }\n\n  updateQueue = () => {\n    console.log(\"hi\");\n  }\n\n  render() {\n    return (\n      <Switch>\n          <Route path=\"/login\" render={ this.renderForm } />\n          <Route path=\"/register\" render={ this.renderForm } />\n          <Route path=\"/\" exact render={() =>\n              <Home\n                userName={ this.state.user.username }\n                movies={ this.state.movies }\n                addMovieToQueue={ this.addMovieToQueue }\n                updateQueue={ this.updateQueue }\n                userObj={ this.state.user }\n              />\n            } />\n          <Route render={ () => <p>Page not Found</p> } />\n      </Switch>\n    )\n  }\n}\n\nexport default withRouter(App)\n"]},"metadata":{},"sourceType":"module"}