{"ast":null,"code":"var _jsxFileName = \"/Users/mbp/Development/code/mod-4/FlickPix/flickpix-frontend/src/App.js\";\nimport React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Home from './components/Home';\nimport FormContainer from './components/FormContainer';\nlet api = `http://localhost:4000/movies`;\nexport default class app extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      movies: [],\n      queues: [],\n      user: {\n        id: 0,\n        username: \"\",\n        user_queues: []\n      },\n      token: \"\"\n    };\n\n    this.handleResponse = response => {\n      if (response.user) {\n        localStorage.token = response.token;\n        this.setState({\n          user: response.user,\n          token: response.token\n        }, () => {\n          this.props.history.push(\"/profile\");\n        });\n      } else {\n        alert(response.error);\n      }\n    };\n\n    this.handleLoginSubmit = userInfo => {\n      console.log(\"Login form has been submitted\");\n      fetch(\"http://localhost:3000/login\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(userInfo)\n      }).then(r => r.json()).then(this.handleResponse);\n    };\n\n    this.handleRegisterSubmit = userInfo => {\n      console.log(\"Register form has been submitted\");\n      fetch(\"http://localhost:3000/users\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username: userInfo.username,\n          password: userInfo.password\n        })\n      }).then(r => r.json()).then(this.handleResponse);\n    };\n\n    this.renderForm = routerProps => {\n      if (routerProps.location.pathname === \"/login\") {\n        return /*#__PURE__*/React.createElement(FormContainer, {\n          formName: \"Login Form\",\n          handleSubmit: this.handleLoginSubmit,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 14\n          }\n        });\n      } else if (routerProps.location.pathname === \"/register\") {\n        return /*#__PURE__*/React.createElement(FormContainer, {\n          formName: \"Register Form\",\n          handleSubmit: this.handleRegisterSubmit,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 14\n          }\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch(\"http://localhost:3000/persist\", {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      }).then(r => r.json()).then(this.handleResponse);\n    }\n\n    fetch(api).then(r => r.json()).then(data => this.setState({\n      movies: data.movies.results,\n      queues: data.queues\n    }));\n  }\n\n  render() {\n    console.log(this.state.user);\n    return /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      render: this.renderForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/register\",\n      render: this.renderForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      render: () => /*#__PURE__*/React.createElement(Home, {\n        movies: this.state.movies,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 47\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      render: () => /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 33\n        }\n      }, \"Page not Found\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/mbp/Development/code/mod-4/FlickPix/flickpix-frontend/src/App.js"],"names":["React","Switch","Route","Home","FormContainer","api","app","Component","state","movies","queues","user","id","username","user_queues","token","handleResponse","response","localStorage","setState","props","history","push","alert","error","handleLoginSubmit","userInfo","console","log","fetch","method","headers","body","JSON","stringify","then","r","json","handleRegisterSubmit","password","renderForm","routerProps","location","pathname","componentDidMount","data","results","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Switch, Route} from 'react-router-dom';\nimport Home from './components/Home';\nimport FormContainer from './components/FormContainer';\n\nlet api = `http://localhost:4000/movies`;\n\nexport default class app extends React.Component {\n  state = {\n    movies: [],\n    queues: [],\n    user: {\n      id: 0,\n      username: \"\",\n      user_queues: []\n    },\n    token: \"\"\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch(\"http://localhost:3000/persist\", {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      })\n      .then(r => r.json())\n      .then(this.handleResponse)\n    }\n\n    fetch(api)\n    .then(r => r.json())\n    .then(data => this.setState({\n      movies: data.movies.results,\n      queues: data.queues\n    }))\n  }\n\n  handleResponse = (response) => {\n    if (response.user) {\n      localStorage.token = response.token\n      this.setState({\n        user: response.user,\n        token: response.token\n      }, () => {\n        this.props.history.push(\"/profile\")\n      })\n    } else {\n      alert(response.error)\n    }\n  }\n\n  handleLoginSubmit = (userInfo) => {\n    console.log(\"Login form has been submitted\")\n\n    fetch(\"http://localhost:3000/login\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    })\n    .then(r => r.json())\n    .then(this.handleResponse)\n  }\n\n  handleRegisterSubmit = (userInfo) => {\n    console.log(\"Register form has been submitted\")\n    fetch(\"http://localhost:3000/users\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: userInfo.username,\n        password: userInfo.password\n      })\n    })\n    .then(r => r.json())\n    .then(this.handleResponse)\n  }\n\n\n  renderForm = (routerProps) => {\n    if(routerProps.location.pathname === \"/login\"){\n      return <FormContainer formName=\"Login Form\" handleSubmit={this.handleLoginSubmit}/>\n    } else if (routerProps.location.pathname === \"/register\") {\n      return <FormContainer formName=\"Register Form\" handleSubmit={this.handleRegisterSubmit}/>\n    }\n  }\n\n  render() {\n    console.log(this.state.user)\n    return (\n      <Switch>\n          <Route path=\"/login\" render={ this.renderForm } />\n          <Route path=\"/register\" render={ this.renderForm } />\n          <Route path=\"/\" exact render={() => <Home movies={ this.state.movies } /> } />\n          <Route render={ () => <p>Page not Found</p> } />\n      </Switch>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}